env:
  global:
    - CODECOV_TOKEN=41c2d384-6582-455f-84dc-8644d52f5872

language: java
sudo: required

jdk:
  - oraclejdk8

services:
  - postgresql

addons:
   hosts:
       - travis
   hostname: travis
   postgresql: "9.4"

before_script:
  - psql -c "CREATE USER ptcoretest WITH PASSWORD 'ptCoreTest101';"
  - psql -c 'create database ptcoretest;' -U postgres
  - psql -c 'GRANT ALL PRIVILEGES ON DATABASE ptcoretest to ptcoretest;'
  - pip install --user codecov

script:
  - mvn clean package jacoco:report

after_success:
  - codecov
  - python <(curl -s https://raw.githubusercontent.com/TouK/sputnik-ci/master/sputnik-ci.py)
